x = done, / = half done, ! = needs testing

[ ] Rework lobby

# mechanics
[x] add test: riichi score is transferred on ron
[ ] add test: honba are added to payments
[x] add test: riichi points on table are transferred on win
[ ] implement the yakumans tenhou, chiihou and renhou. tests are done
[ ] add test: ankan in riichi
[ ] add test: dora and ura-dora counted on win
[ ] add test: suufonrenda: four consecutive wind discards
[ ] add test: kuushuu kyuuhai: 9 different honors or terminals on initial draw
[x] add test: suucha riichi: four players riichi. last discard may be called ron on
[ ] add test: suukaikan: four kantsu called, all not by one player.
[ ] Implement the suukantsu yaku. Add tests. When one player calls the fourth, game must not end.
[ ] clear TODO's from code
[x] test and implement chankan
# client
[ ] Display concealed hands of other players
[ ] Display winning hand
[ ] Display error prompts when receiving errors in elm
[ ] Undisplay riichi when clicked
[ ] Highlight corresponding tiles on shout hovers
[ ] when a call is passed, update callable info to client. client should not show it
# site
[ ] Rework authentication system. *Email-based*. Include facebook etc. and gravatar.
      [ ] test facebook authentication
[ ] Save game results to relational database
[ ] List on-going games.
[ ] The yesod binary doesn't reconnect to hajong-server automatically. Make it shut down on disconnect.
[ ] Set up logging from workers to a file.
[ ] Clearly show UUID's of past games. Allow commenting on them. This helps bug reporting


# someday/maybe
[ ] (graphics) point sticks (1000 done)
[ ] (graphics) more esthetic tiles
[ ] (elm) chat/dialog
[ ] (elm) try out elm-bridge for generating json parsers
[ ] (docs) write json API Spec
[ ] (site, elm) player last.fm integration
[ ] (site) Optional mic communication via webrtc
[ ] Game configuration options
   [ ] (opt) start and goal scores
   [ ] (opt) wareme
   [ ] (opt) chombo
   [ ] (opt) aotenjou
   [ ] (opt) basengo
   [ ] (opt) chombo
[ ] Pause a worker.
[ ] ryanhan-shibari
[ ] (worker/game) available shouts when refreshing game
[ ] sanchahou: disallow triple ron

# done
[x] (game, elm) riichi
[x] (game) kokushi musou
[x] (game) chiitoi
[x] (elm) riichi rotate tile
[x] (elm) riichi stick
[X] (game) BUG shoutedFrom cannot draw anymore "Cannot draw from wall"
[x] (game) BUG shouting multiple: discard player's all other shouts.
[X] (game) BUG draw; round changes even if oja is tenpai or no-one is tenpai
[x] (web) re-enter game on refresh
[x] (web) retain nick on refresh
[x] player in turn -indicator
[x] mentsu (needs correct from indicator)
[x] (game, elm) new dora when kan
[x] (elm) limit log lengths
[x] (game) furiten
[x] (site) nick set
[x] (game) nagashi mangan check
[x] (game) chankan
[!] (game) final scoring and possible next rounds
[!] (game) shout only ron on last tile from wall
[!] (game) no wait-shout other than ron if riichi
[!] (game) BUG: riichi even if hand open
[!] (game, elm, server) tsumo
[!] minshoukan
[!] ankan


# changes
[x] in Kyoku-type: pPlayers changed to index with kaze, not player. change in client
[x] flipped argument order in DealNick, change in JSON on  both sides
[x] in gamePoints, player changed to Kaze
[x] Kyoku._pRound : Kaze -> (Kaze, Int)
[x] in KyokuResults, Players are now Kaze
[x] Kyoku._pDeal removed
